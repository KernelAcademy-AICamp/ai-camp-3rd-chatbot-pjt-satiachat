# **GLP-1 사용자 대상 LLM API를 활용한 다이어트 보조 챗봇 DietRx Coach 개발**
본 프로젝트는 OpenAI GPT-4o-mini와 LlamaIndex RAG 시스템을 활용하여 GLP-1 계열 비만치료제(위고비, 마운자로) 사용자를 위한 **AI 기반 다이어트 코칭 플랫폼**을 개발합니다. 사용자의 식단 기록, 체중 변화, 약물 복용 데이터를 기반으로 **개인화된 식단 코칭, 약물 정보 Q&A, 복용 일정 관리** 등 핵심적인 건강 관리 기능을 제공하는 것을 목표로 합니다.

- **프로젝트 기간:** 2025.12.04 ~ 2025.12.10 (총 1주일)
- **배포 링크:** [서비스 바로가기](링크 입력) *(완료 후 추가)*

---
# **서비스 구성 요소**

## **1. 주요 기능**

### **1.1 AI 식단 코칭 챗봇 (핵심 기능)**
자연어 기반의 대화형 식단 관리 시스템입니다.

| 기능 | 설명 |
|------|------|
| **자연어 식단 기록** | "점심에 비빔밥 먹었어"라고 말하면 자동으로 식단이 기록됩니다 |
| **3가지 동물 페르소나** | 사용자 성향에 맞는 코칭 스타일 선택 가능 |
| **식단 조회/수정/삭제** | "오늘 뭐 먹었지?", "점심 취소해줘" 등 대화로 관리 |
| **맞춤형 피드백** | 사용자의 목표 칼로리와 영양 균형을 고려한 코칭 |
| **컨텍스트 인식** | 프로필, 오늘의 식단, 체중 변화를 자동으로 파악하여 응답 |

**동물 AI 코치 페르소나:**

| 페르소나 | 캐릭터 | 말투 특징 | 성격 |
|----------|--------|-----------|------|
| 🐱 **냥이 코치** | 도도한 고양이 | "~냥, ~다냥, ~라냥" | 시크하고 도도하지만 은근히 챙겨줌 |
| 🐕 **댕댕이 코치** | 밝은 강아지 | "멍멍! ~요! ~해요!" + 이모지 | 꼬리 흔들며 신나게 응원 |
| 🐷 **꿀꿀이 코치** | 엄격한 돼지 | "꿀꿀! ~야! ~해!" | 칼로리에 엄격, 직설적이고 단호함 |

**페르소나별 응답 예시:**
```
[식단 기록 시]
🐱 냥이: "치킨이라냥... 450칼로리 추가다냥"
🐕 댕댕이: "멍멍! 치킨 맛있겠어요! 🍗 450칼로리 추가했어요! ✨"
🐷 꿀꿀이: "꿀꿀! 치킨 450칼로리 추가다! 오늘 좀 많이 먹었어!"

[칼로리 초과 시]
🐱 냥이: "좀 많이 먹었다냥... 내일은 조절하라냥"
🐕 댕댕이: "조금 많이 먹었지만 괜찮아요! 💪 내일 화이팅! 🔥"
🐷 꿀꿀이: "꿀꿀! 칼로리 초과야! 내일은 무조건 절제해! 🐷"
```

### **1.2 RAG 기반 약물 Q&A**
식약처 공식 문서를 기반으로 한 신뢰할 수 있는 전문 약물 정보 시스템입니다.

| 기능 | 설명 |
|------|------|
| **공식 문서 기반 답변** | 식약처 의약품안전나라 허가 정보 활용 |
| **위고비/마운자로 전문 정보** | GLP-1 계열 비만치료제 특화 Q&A |
| **출처 명시** | "허가사항에 따르면~" 형식으로 근거 제시 |
| **전문 상담 톤** | 캐릭터 없이 정중하고 전문적인 의료 상담 |


**지원 질문 유형:**
- 효능효과 및 작용 원리
- 용법용량 및 투여 방법 (주사 부위 등)
- 부작용 및 주의사항
- 약물 상호작용


### **1.3 약물 복용 스케줄 관리**
주 1회 GLP-1 약물 복용을 체계적으로 관리합니다.

| 기능 | 설명 |
|------|------|
| **복용 요일 설정** | 매주 복용할 요일 지정 |
| **달력 기반 UI** | 월별 복용 현황을 한눈에 확인 |
| **복용 완료 체크** | 클릭 한 번으로 복용 기록 |
| **복용 이력 추적** | 과거 복용 기록 조회 가능 |
| **AI 챗봇 연동** | 약물 관련 질문을 RAG 챗봇에서 답변 |

### **1.4 식단 기록 및 분석**
11,086개의 한국 음식 데이터베이스를 활용한 정확한 영양 분석입니다.

| 기능 | 설명 |
|------|------|
| **한국 음식 DB** | 11,086개 음식의 영양 정보 보유 |
| **실시간 검색** | 음식명 검색으로 빠른 입력 |
| **자동 영양소 계산** | 칼로리, 단백질, 탄수화물, 지방 자동 산출 |
| **끼니별 관리** | 아침/점심/저녁/간식 구분 기록 |
| **일별 합계** | 하루 총 섭취량 실시간 표시 |

### **1.5 대시보드**
모든 건강 정보를 한눈에 파악할 수 있는 통합 화면입니다.

| 구성 요소 | 설명 |
|-----------|------|
| **칼로리 섭취 현황** | 오늘의 섭취/목표 칼로리 진행률 표시 |
| **체중 변화 추이** | 최근 7일간 체중 그래프 |
| **약물 복용 상태** | 이번 주 복용 완료 여부 |
| **오늘의 식단** | 끼니별 섭취 음식 요약 |
| **AI 챗봇** | 동물 코치와 바로 대화할 수 있는 채팅 패널 |
| **빠른 기록** | 식단/체중 기록 원클릭 접근 |

### **1.6 체중 추적 및 리포트**
체계적인 체중 관리와 분석 리포트를 제공합니다.

| 기능 | 설명 |
|------|------|
| **체중 기록** | 날짜별 체중 입력 및 관리 |
| **변화 그래프** | 선형 차트로 체중 추이 시각화 |
| **주간 통계** | 평균 체중, 변화량, 최저/최고 체중 |
| **목표 달성률** | 목표 체중 대비 진행 상황 |
| **주간 리포트** | 식단/체중/운동 종합 분석 |

### **1.7 온보딩 시스템**
5단계 맞춤형 프로필 설정으로 개인화된 경험을 제공합니다.

| 단계 | 설정 항목 |
|------|-----------|
| **Step 1** | 성별, 출생연도 |
| **Step 2** | 신장(cm) |
| **Step 3** | 현재 체중, 목표 체중 |
| **Step 4** | 활동량 수준 (저활동/보통/활동적/매우 활동적) |
| **Step 5** | AI 코치 페르소나 선택 (냥이/댕댕이/꿀꿀이) |

설정 완료 시 **BMR 기반 일일 권장 칼로리**가 자동 계산됩니다.

### **1.8 마이페이지 및 설정**
개인 정보와 앱 설정을 관리합니다.

| 기능 | 설명 |
|------|------|
| **프로필 조회** | 현재 설정된 목표 및 정보 확인 |
| **목표 수정** | 목표 체중, 칼로리 재설정 |
| **페르소나 변경** | AI 동물 코치 스타일 변경 |
| **계정 관리** | 로그아웃, 회원 탈퇴 |

---

## **2. 사용자 흐름**

### **2.1 신규 사용자 여정**
```
회원가입 → 온보딩(5단계) → 동물 코치 선택 → 대시보드 진입 → AI 코치와 첫 대화
```

### **2.2 일상적인 사용 패턴**

**아침 루틴:**
1. 앱 실행 → 대시보드에서 어제 요약 확인
2. "아침에 토스트랑 우유 먹었어" 채팅 입력
3. 동물 코치의 개성있는 피드백 확인

**저녁 루틴:**
1. 대시보드에서 오늘 칼로리 확인
2. "저녁 뭐 먹을까?" 동물 코치에게 질문
3. 추천 받은 식단으로 저녁 기록

**주간 루틴:**
1. 약물 복용일에 달력에서 체크
2. 체중 기록 후 주간 변화 확인
3. 리포트에서 한 주 분석 확인

### **2.3 상세 사용자 시나리오**

**시나리오 1: 첫 사용자 온보딩**
> 김민수(35세, 남성)씨가 위고비를 처방받고 앱을 설치했습니다.
1. 회원가입 후 성별(남성), 출생연도(1989) 입력
2. 신장 175cm 입력
3. 현재 체중 85kg, 목표 체중 75kg 설정
4. 활동량 '보통' 선택
5. AI 코치 '꿀꿀이 코치 🐷' 선택
6. **결과**: 일일 목표 칼로리 1,800kcal 자동 계산, 대시보드 진입

**시나리오 2: 자연어 식단 기록 (댕댕이 코치)**
> "오늘 점심에 비빔밥이랑 된장찌개 먹었어"
1. AI가 메시지 분석 → 식단 기록 Intent 감지
2. Function Calling으로 음식 정보 추출
   - 비빔밥: 550kcal, 탄수화물 80g, 단백질 15g, 지방 12g
   - 된장찌개: 150kcal, 탄수화물 10g, 단백질 8g, 지방 6g
3. DB에 자동 저장
4. 댕댕이 코치 응답: "멍멍! 점심 맛있게 드셨군요! 🍚 총 700칼로리 기록했어요! 목표의 39% 달성이에요! ✨ 저녁은 단백질 위주로 가볍게 드시면 좋겠어요! 💪"

**시나리오 3: 약물 정보 질문 (RAG)**
> "위고비 주사 맞는 부위가 어디야?"
1. RAG 시스템이 식약처 문서에서 관련 정보 검색
2. 벡터 유사도 기반 상위 문서 추출
3. GPT가 컨텍스트 기반 답변 생성 (전문 상담 톤)
4. **응답**: "허가사항에 따르면, 위고비는 복부, 허벅지, 또는 상완 부위에 피하주사합니다. 매주 같은 요일에 투여하되, 주사 부위는 매번 바꿔주시기 바랍니다. [참고 출처: 위고비 허가사항]"

**시나리오 4: 식단 수정 (냥이 코치)**
> "아까 점심에 비빔밥 말고 샐러드였어"
1. AI가 수정 Intent 감지
2. 오늘 점심 기록에서 '비빔밥' 검색
3. '비빔밥' → '샐러드'로 교체 (영양정보 재계산)
4. 냥이 코치 응답: "바꿔줬다냥. 550칼로리에서 200칼로리로 줄었다냥... 뭐 잘한 선택이라냥"

---

## **2. 활용 장비 및 협업 툴**

### **2.1 활용 장비**
- **개발 환경:** Windows 11 / macOS 기반 개인 PC
- **서버 환경:** Local 환경 구동 (Supabase Cloud 활용)

### **2.2 협업 툴**
- **소스 관리:** GitHub
- **프로젝트 관리:** Notion
- **커뮤니케이션:** Slack, Discord
- **버전 관리:** Git

---

## **3. 최종 선정 AI 모델 구조**
- **모델 이름:** **OpenAI GPT-4o-mini** (식단 챗봇), **LlamaIndex + BAAI/bge-m3** (약물 RAG)
- **구조 및 설명:** 본 프로젝트는 두 가지 AI 시스템을 활용합니다:
  1. **식단 코칭 챗봇:** GPT-4o-mini를 Function Calling과 함께 사용하여 사용자 메시지에서 식단 정보를 추출하고 자동으로 DB에 기록합니다. Intent 분류를 통해 기록/조회/분석/대화 등 적절한 처리 방식을 결정합니다.
  2. **약물 RAG 시스템:** 식약처 공식 문서를 BAAI/bge-m3 모델로 임베딩하여 벡터 인덱스를 생성하고, 사용자 질문과 유사한 문서를 검색하여 GPT-4o-mini가 답변을 생성합니다.
- **학습 데이터:** 식약처 의약품안전나라에서 수집한 위고비/마운자로 공식 문서(효능효과, 용법용량, 주의사항)
- **평가 지표:** 식단 기록 정확도, RAG 답변의 정확성 및 출처 명시, 사용자 경험 만족도를 정성적으로 평가합니다.

---

## **4. 서비스 아키텍처**
### **4.1 시스템 구조도**
사용자 인터페이스(React)에서 입력을 받아 Supabase(인증/DB)와 FastAPI(AI 처리)로 전달하고, 결과를 다시 사용자에게 보여주는 하이브리드 아키텍처를 따릅니다.
```
┌──────────────────┐     ┌──────────────────┐     ┌──────────────────┐
│   User (Client)  │────▶│     Supabase     │────▶│    PostgreSQL    │
│  (React/Vite)    │     │   (Auth / DB)    │     │  (meals, meds)   │
└──────────────────┘     └──────────────────┘     └──────────────────┘
         │
         ▼
┌──────────────────┐     ┌──────────────────┐
│   FastAPI Server │────▶│   OpenAI API     │
│  (AI Chat, RAG)  │     │   LlamaIndex     │
└──────────────────┘     └──────────────────┘
```

### **4.2 데이터 흐름도**
1.  **사용자 입력:** 사용자가 React UI를 통해 채팅 메시지를 입력합니다.
2.  **인증 확인:** Supabase Auth로 JWT 토큰을 검증합니다.
3.  **Intent 분류:** FastAPI 서버가 메시지의 의도(기록/조회/분석/대화)를 분류합니다.
4.  **Function Calling:** 식단 기록 Intent면 GPT가 음식명/칼로리를 추출하여 DB에 저장합니다.
5.  **RAG 검색:** 약물 질문이면 벡터 검색으로 관련 문서를 찾아 컨텍스트에 포함합니다.
6.  **응답 생성:** 페르소나가 적용된 응답을 생성하여 사용자에게 반환합니다.

---

## **5. 사용 기술 스택**
### **5.1 백엔드**
- **Framework:** FastAPI (Python 3.11)
- **Database:** Supabase (PostgreSQL)
- **Authentication:** Supabase Auth (JWT)
- **LLM API:** OpenAI GPT-4o-mini

### **5.2 프론트엔드**
- **Framework:** React 18 + TypeScript
- **Build Tool:** Vite + SWC
- **UI Library:** shadcn/ui (Radix Primitives)
- **Styling:** Tailwind CSS
- **State Management:** TanStack Query (React Query)
- **Routing:** React Router v6

### **5.3 머신러닝 및 데이터 분석**
- **RAG Framework:** LlamaIndex
- **Embedding Model:** BAAI/bge-m3 (다국어 지원)
- **LLM Libraries:** `openai`, `llama-index`
- **Data Source:** 식약처 의약품안전나라 API

### **5.4 배포 및 운영**
- **Frontend:** Vercel / Netlify
- **Backend:** Railway / Render
- **Database:** Supabase Cloud
- **Runtime Environment:** Node.js 18+, Python 3.11+

---

## **6. 팀원 소개**


| ![어현우](https://avatars.githubusercontent.com/u/156163982?v=4) | ![김혜민](https://avatars.githubusercontent.com/u/156163982?v=4) |
| :--------------------------------------------------------------: | :--------------------------------------------------------------: |
|            [어현우](https://github.com/EHW99)             |            [김혜민](https://github.com/)             |

---

## **7. Appendix**
### **7.1 참고 자료**
- **API 문서:** [OpenAI API Reference](https://platform.openai.com/docs/api-reference), [Supabase Documentation](https://supabase.com/docs)
- **프레임워크:** [FastAPI 공식 문서](https://fastapi.tiangolo.com/), [React 공식 문서](https://react.dev/)
- **RAG 시스템:** [LlamaIndex Documentation](https://docs.llamaindex.ai/)
- **UI 컴포넌트:** [shadcn/ui](https://ui.shadcn.com/)
- **의약품정보:**[위고비프리필드펜1.0 (세마글루타이드)](https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202301386aupdateTs2024-07-09+09%3A45%3A43.250267b)
- **의약품정보:**[마운자로프리필드펜주 2.5 mg (티르제파타이드)](https://nedrug.mfds.go.kr/pbp/CCBBB01/getItemDetailCache?cacheSeq=202301983aupdateTs2025-07-22+09%3A05%3A22.239066b)


### **7.2 설치 및 실행 방법**
1.  **Repository 클론:**
    ```bash
    git clone https://github.com/KernelAcademy-AICamp/ai-camp-3rd-chatbot-pjt-satiachat?tab=readme-ov-file
    cd mini_project
    ```

2.  **Frontend 설정:**
    ```bash
    npm install
    npm run dev
    ```

3.  **Backend 설정:**
    ```bash
    cd server
    pip install -r requirements.txt
    python -m uvicorn main:app --reload --port 8000
    ```

4.  **.env 파일 생성 및 API 키 설정:**
    - Frontend (`.env.local`):
    ```
    VITE_SUPABASE_URL="YOUR_SUPABASE_URL"
    VITE_SUPABASE_ANON_KEY="YOUR_SUPABASE_ANON_KEY"
    VITE_API_URL="http://localhost:8000/api/v1"
    ```
    - Backend (`server/.env`):
    ```
    OPENAI_API_KEY="YOUR_OPENAI_API_KEY"
    SUPABASE_URL="YOUR_SUPABASE_URL"
    SUPABASE_SERVICE_KEY="YOUR_SUPABASE_SERVICE_KEY"
    ```

5.  **애플리케이션 실행:**
    ```bash
    # Frontend (터미널 1)
    npm run dev

    # Backend (터미널 2)
    cd server && python -m uvicorn main:app --reload --port 8000
    ```

### **7.3 주요 커밋 기록 및 업데이트 내역**

| 날짜 | 업데이트 내용 | 담당자 |
| :--- | :--- | :--- |
| 2025.12.04 | 프로젝트 초기 설정 및 Supabase 연동 | 어현우 |
| 2025.12.05 | 온보딩 플로우 및 사용자 프로필 구현 | 김혜민 |
| 2025.12.06 | AI 챗봇 페르소나 시스템 구현 | 어현우 |
| 2025.12.07 | 약물 관리 기능 및 달력 UI 개발 | 김혜민 |
| 2025.12.08 | FastAPI 백엔드 및 RAG 시스템 구축 | 어현우 |
| 2025.12.09 | UI 개선 및 로고 디자인 적용 | 김혜민 |
| 2025.12.10 | 전체 기능 통합 및 최종 테스트 | 전원 |
